webpackJsonp([1],{"+iMS":function(t,e){},K8Bh:function(module,__webpack_exports__,__webpack_require__){"use strict";function uuid(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return(t=(t=t.replace(/x/g,function(){return(16*Math.random()|0).toString(16)})).replace("y",(16*Math.random()&3|8).toString(16))).replace(/-/g,"").substr(0,24)}function calcCondition(condition,data){if(!condition)return!1;var con=condition.replace(/([^()&|='"]+)=+/g,"data.$1===");try{return eval(con)}catch(t){}return!1}__webpack_exports__.b=uuid,__webpack_exports__.a=calcCondition},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),o=n("Dd8w"),r=n.n(o),a=n("w/TU"),c=n.n(a),u=n("K8Bh"),s=n("d7EF"),l=n.n(s),p=n("W3Iv"),d=n.n(p),f={filters:{optionFilter:function(t,e){return"string"==typeof t?t:t[e]}},props:["config","value","disabled"],data:function(){return{}},computed:{componentName:function(){return{input:"el-input",number:"el-input-number",textarea:"el-input"}[this.$props.config.type]},componentProps:function(){var t={};return d()(this.$props.config).forEach(function(e){var n=l()(e,2),i=n[0],o=n[1];["id","type","key","title","defaultValue","options"].includes(i)||(t[i]=o)}),t}},watch:{"config.defaultValue":function(t){this.$emit("input",t)}},mounted:function(){this.$emit("input",this.config.defaultValue)},methods:{}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:t.config.title,prop:t.config.key}},["select"===t.config.type?n("el-select",{attrs:{placeholder:t.config.placeholder,disabled:t.disabled,value:t.value},on:{input:function(e){return t.$emit("input",e)}}},t._l(t.config.options,function(e){return n("el-option",{key:t._f("optionFilter")(e,"key"),attrs:{value:t._f("optionFilter")(e,"value"),label:t._f("optionFilter")(e,"value")}})}),1):"checkbox"===t.config.type?n("el-checkbox-group",{attrs:{disabled:t.disabled,value:t.value||[]},on:{input:function(e){return t.$emit("input",e)}}},t._l(t.config.options,function(e){return n("el-checkbox",{key:t._f("optionFilter")(e,"key"),attrs:{label:t._f("optionFilter")(e,"key")}},[t._v("\n      "+t._s(t._f("optionFilter")(e,"value"))+"\n    ")])}),1):"radio"===t.config.type?n("el-radio-group",{attrs:{disabled:t.disabled,value:t.value},on:{input:function(e){return t.$emit("input",e)}}},t._l(t.config.options,function(e){return n("el-radio",{key:t._f("optionFilter")(e,"key"),attrs:{label:t._f("optionFilter")(e,"key")}},[t._v("\n      "+t._s(t._f("optionFilter")(e,"value"))+"\n    ")])}),1):n(t.componentName,t._b({tag:"component",attrs:{type:t.config.type,disabled:t.disabled,value:t.value},on:{input:function(e){return t.$emit("input",e)}}},"component",t.componentProps,!1))],1)},staticRenderFns:[]},m=n("VU/8")(f,v,!1,null,null,null).exports,_=n("bOdI"),y=n.n(_),x={components:{formItem:m},filters:{calcCondition:u.a},props:["dataSource","value"],data:function(){return{}},methods:{handleInput:function(t,e){this.$emit("input",r()({},this.$props.value,y()({},t,e)))}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{attrs:{"label-width":"auto"}},t._l(t.dataSource,function(e){return n("div",{key:e.id},[n("form-item",{attrs:{config:e,value:t.value[e.key],disabled:t._f("calcCondition")(e.disabled,t.value)},on:{input:function(n){return t.handleInput(e.key,n)}}})],1)}),0)},staticRenderFns:[]};var h=n("VU/8")(x,b,!1,function(t){n("Zsns")},"data-v-24ee8f71",null).exports,k=n("hE8X"),g=n.n(k),F={components:{draggable:c.a,formItem:m,preview:h},filters:{calcCondition:u.a},data:function(){return{current:"",menus:g.a.components,props:g.a.props,defines:g.a.defines,dataSource:[],dataForm:{}}},computed:{currentIdx:function(){var t=this;return this.dataSource.findIndex(function(e){return e.id===t.current})},currentProps:function(){var t=this,e=this.dataSource[this.currentIdx];if(e)return(this.props[e.type]||[]).reduce(function(e,n){return e.concat(t.defines[n])},[])}},methods:{prepareClone:function(t){var e=Object(u.b)();return r()({id:e,key:t.type+"_"+e.substr(0,4)},t)},remove:function(t){var e=this.dataSource.findIndex(function(e){return e.id===t});this.current===t&&(this.current=""),this.dataSource.splice(e,1)},copy:function(t){var e=this.dataSource.findIndex(function(e){return e.id===t}),n=Object(u.b)();this.dataSource.splice(e,0,r()({},this.dataSource[e],{id:n,key:this.dataSource[e].type+"_"+n.substr(0,4)}))}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"left"},[n("h2",[t._v("基础字段")]),t._v(" "),n("draggable",{staticClass:"menu",attrs:{tag:"ul",list:t.menus,group:{name:"component",pull:"clone",put:!1},sort:!1,clone:t.prepareClone}},t._l(t.menus,function(e){return n("li",{key:e.type,staticClass:"menu-item"},[n("a",[t._v(t._s(e.title))])])}),0)],1),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"header"},[t._v("\n      head\n    ")]),t._v(" "),n("div",{staticClass:"body"},[n("el-form",{attrs:{"label-width":"auto"}},[n("draggable",{staticClass:"drag-area",attrs:{list:t.dataSource,animation:200,"ghost-class":"ghost",group:"component"}},t._l(t.dataSource,function(e){return n("div",{key:e.id,staticClass:"form-item",class:{active:t.current===e.id},on:{click:function(n){t.current=e.id}}},[n("form-item",{attrs:{config:e,disabled:t._f("calcCondition")(e.disabled,t.dataForm)},model:{value:t.dataForm[e.key],callback:function(n){t.$set(t.dataForm,e.key,n)},expression:"dataForm[c.key]"}}),t._v(" "),n("div",{staticClass:"option"},[n("el-tooltip",{attrs:{content:"复制"}},[n("a",{on:{click:function(n){return t.copy(e.id)}}},[n("i",{staticClass:"el-icon-copy-document"})])]),t._v(" "),n("el-tooltip",{attrs:{content:"删除"}},[n("a",{on:{click:function(n){return t.remove(e.id)}}},[n("i",{staticClass:"el-icon-delete"})])])],1)],1)}),0)],1)],1)]),t._v(" "),n("div",{staticClass:"right"},[n("h2",[t._v("属性配置")]),t._v(" "),n("div",{staticClass:"props-content"},[n("preview",{attrs:{"data-source":t.currentProps},model:{value:t.dataSource[t.currentIdx],callback:function(e){t.$set(t.dataSource,t.currentIdx,e)},expression:"dataSource[currentIdx]"}})],1),t._v(" "),n("code",[n("pre",[t._v(t._s(JSON.stringify(t.dataSource,void 0,2)))])]),t._v(" "),n("code",[n("pre",[t._v(t._s(JSON.stringify(t.dataForm,void 0,2)))])])])])},staticRenderFns:[]};var S={name:"App",components:{FormFoundry:n("VU/8")(F,C,!1,function(t){n("rCqK")},"data-v-18a81548",null).exports}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("FormFoundry")],1)},staticRenderFns:[]};var I=n("VU/8")(S,$,!1,function(t){n("+iMS")},null,null).exports,w=n("zL8q"),V=n.n(w);n("tvR6");i.default.config.productionTip=!1,i.default.use(V.a,{size:"mini"}),new i.default({el:"#app",components:{App:I},template:"<App/>"})},Zsns:function(t,e){},hE8X:function(t,e){t.exports={components:[{type:"input",title:"单行文本"},{type:"number",title:"数字"},{type:"textarea",title:"多行文本"},{type:"select",title:"下拉框",options:["option1","option2"]},{type:"checkbox",title:"复选框",defaultValue:[],options:[{key:"option1",value:"选项1"},"option2"]},{type:"radio",title:"单选框",defaultValue:"option1",options:[{key:"option1",value:"选项1"},"option2"]}],props:{input:["basic"],number:["basic"],textarea:["basic"],select:["basic","select"],checkbox:["basic","select"]},defines:{basic:[{type:"input",title:"标题",key:"title"},{type:"input",title:"字段索引",key:"key"},{type:"input",title:"占位内容",key:"placeholder"},{type:"input",title:"默认值",key:"defaultValue"},{type:"textarea",title:"条件禁用",key:"disabled"}],select:[{type:"input",title:"选项"}]}}},rCqK:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fbe0cc3b5b9c4810ad33.js.map